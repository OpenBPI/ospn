# 开放式社交公共网络客户端设计方案

这套方案是我们推荐的客户端解决方案，但并不是唯一的设计。

## 账户系统
OSN的账户体系是基于密码学生成的，账户生成方式请参阅《开放式社交网络通信协议》。
为了切实保护用户对账户的绝对所有权，我们推荐使用“助记词”生成，用户需要确定一个自己喜欢的名字。当用户恢复账户时，使用该助记词和该名字即可恢复账户。  
 
## 添加好友
由于跨界的原因，各个IM服务对于功能的支持都不太相同，如果跨界IM服务不提供查找的功能，那么通过搜索这种传统方式添加好友可能会失败。比如，有些IM为了保护用户隐私，而对其他企业不提供此功能。  因此双方添加好友，我们建议是交换OSN账户，或者相互扫码。   
另外还有一种添加好友的方式是通过朋友介绍。该流程如下：  
1. 用户B介绍用户A和用户C成为朋友。  
2. B首先发送介绍消息给A和C。  
3. A和C收到以后，会做出同意和拒绝的决定。  
4. 如果是同意，A会将账户加密以后由B发送给C。因为如果客户端策略是不接受陌生人消息时，A是无法发送给C的，因此需要B转发。同时C也会做同样的动作。  
5. 双方添加好友成功以后可以相互发送消息。  

注：加密是为了防止中间人B获得A和C的通信通道，在微观隐私保护中我们会讨论这样做的意义。

## 更新个人信息
双方添加好友以后，是没有对方的信息的，包括对方的face，昵称，个性签名等等都是没有的。因此需要双方发送获取对方公开信息的命令来更新。更新方式请参阅《开放式社交网络通信协议》。

## 发送消息
由于跨界消息会被网络上的任何人获取，因此发送消息时我们建议加密发送，当然这不是必须的。
用户可以从好友的账户中提取出对方的公钥进行加密，加密方式和封装格式请参阅《开放式社交网络通信协议》。 

## 导出与导入
我们主张让用户可以自由的选择自己喜欢的应用来使用。但是企业是最不希望用户离开的，因此该功能不一定被企业所采纳。通讯录请参照《开放式社交网络通信协议》。
用户从一个应用切换到另一个应用时，只需要从前一个应用中导出通信录，并导入到新的应用中即可。适用的场景是用户可以用同一个账户登录多个应用，对应不同的人群。  

注：在微观隐私保护中我们会介绍部分字段的含义。

## 更换账户
由于社交网络不同于数字货币支付，社交网络使用私钥的频率非常高，在存储的时候，如果每次都需要输入密码解密才能发送消息，会影响用户使用。基于此点考虑，OSN账户采用了双key的设计，当用户使用一段时间以后，可以选择更换账户，从而保护自己的账户安全。
更换账户请参阅《开放式社交网络通信协议》。  

注：在微观隐私保护中我们会详细讨论。



